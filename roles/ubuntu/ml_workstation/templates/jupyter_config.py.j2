# Jupyter Lab Configuration for Remote ML Development
# Generated by Ansible oaAnsible/roles/ubuntu/ml_workstation

c = get_config()

# Network configuration for remote access
c.ServerApp.ip = '0.0.0.0'  # Listen on all interfaces
c.ServerApp.port = {{ training_server.jupyter_port | default(8888) }}
c.ServerApp.open_browser = False  # Don't open browser on server
c.ServerApp.allow_remote_access = True

# Security settings
c.ServerApp.token = ''  # Disable token for internal network (Tailscale protected)
c.ServerApp.password = ''  # No password needed on private network
c.ServerApp.disable_check_xsrf = True

# Working directory
c.ServerApp.root_dir = '{{ oasentinel_install_dir }}'

# Resource limits
c.ServerApp.max_buffer_size = 268435456  # 256MB buffer

# Allow large outputs
c.NotebookApp.iopub_data_rate_limit = 10000000  # 10MB/s

# Extensions and features
c.ServerApp.allow_origin = '*'
c.ServerApp.allow_credentials = True

# Logging
c.Application.log_level = 'INFO'

# Auto-save settings
c.ContentsManager.checkpoints_kwargs = {'root_dir': '{{ oasentinel_install_dir }}/.ipynb_checkpoints'}

# Performance settings for ML workloads
c.ZMQChannelsHandler.kernel_info_timeout = 60
c.ZMQChannelsHandler.kernel_restart_limit = 5